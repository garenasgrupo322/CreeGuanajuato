@page
@model CardModel
@{
    ViewData["Title"] = "Guardar Tarjeta";
}

<style type="text/css">
    .card {
        width: 500px;
        height: 300px;
        border-radius: 25px;
        border: 2px solid gray;
        background-color: #610B0B;
    }

    .header {
        width: 400px;
        color: #F6E3CE;
        margin-left: 50px;
        height: 70px;
    }

    .body {
        height: 180px;
        background-color: white;
        width: 496px;
        font-size: large;
        font-weight: bold;
    }

    .footer {
        height: 50px;
    }

    .a-image {

    }

    .a-body {

    }

    .a-qr {

    }
</style>

<h2>Usuario</h2>

<h4>@ViewData["Title"]</h4>
<hr />
<div class="row">
    <div class="col-md-6">
        <div class="form-group">
            <div class="card" id="tarjeta">
                <header class="header">
                    <h4>CREE EN</h4>
                    <h4>GUANAJUATO</h4>
                </header>
                <section class="body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <br />
                                <img src="~/images/logo_color.png" width="120" style="margin-left: 10px;"/>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <br />
                                <br />
                                @Html.DisplayFor(model => model.CreeGuanajuatoUser.nombre)
                                <br />
                                @Html.DisplayFor(model => model.CreeGuanajuatoUser.apellido_paterno)
                                <br />
                                @Html.DisplayFor(model => model.CreeGuanajuatoUser.apellido_materno)
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="form-group text-center">
                                <img src="@ViewData["imageQR"]" style="margin-top: 10px;"/>
                            </div>
                        </div>
                    </div>
                </section>
                <footer class="footer">

                </footer>
            </div>
        </div>
        <div class="form-group">
            <button type="button" class="btn btn-default" onclick="capturaPantalla();">Descargar</button>
        </div>
    </div>
</div>

<div>
    <a asp-page="Index">Regresar</a>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/html2canvas.min.js"></script>
    <script src="~/js/canvas-toBlob.js"></script>
    <script type="text/javascript">
        function capturaPantalla() {
            html2canvas(document.querySelector("#tarjeta")).then(canvas => {
                canvas.toBlob(function(blob) {
                    saveAs(blob, "tarjeta.png");
                });
            });
        }
    </script>
}
